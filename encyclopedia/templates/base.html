<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
    <title>{% block title %}百度贴吧{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* CSS设计Token定义 */
        :root {
            /* 主色调 */
            --primary: #3886e1;
            --primary-hover: #3076cc;
            --primary-light: rgba(56, 134, 225, 0.1);
            --secondary: #5856D6;
            
            /* 功能色 */
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            
            /* 文字颜色 */
            --text-primary: #333333;
            --text-secondary: #666666;
            --text-light: #999999;
            
            /* 背景色 */
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --bg-tertiary: #f9f9f9;
            
            /* 边框 */
            --border: #e5e5e5;
            
            /* 阴影 */
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 4px 16px rgba(0, 0, 0, 0.15);
            
            /* 圆角 */
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --radius-full: 9999px;
            
            /* 间距 */
            --gap-xs: 4px;
            --gap-sm: 8px;
            --gap-md: 16px;
            --gap-lg: 24px;
            --gap-xl: 32px;
            
            /* 过渡 */
            --transition-fast: 0.2s ease;
            --transition-md: 0.3s ease;
            --transition-slow: 0.5s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'PingFang SC', 'Microsoft YaHei', sans-serif;
            font-size: 14px;
            color: var(--text-primary);
            background-color: var(--bg-secondary);
            line-height: 1.6;
        }

        /* 容器组件 */
        .Layout {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .Container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            padding: 0 var(--gap-md);
        }

        /* 头部导航组件 */
        .Header {
            background-color: var(--primary);
            color: white;
            padding: var(--gap-sm) 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: var(--shadow-sm);
        }

        .Header__container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .Logo a {
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: var(--gap-sm);
            transition: opacity var(--transition-fast);
        }

        .Logo a:hover {
            opacity: 0.9;
        }

        .Logo__icon {
            width: 32px;
            height: 32px;
            fill: currentColor;
        }

        /* 搜索框组件 */
        .SearchBar {
            flex: 1;
            max-width: 500px;
            margin: 0 var(--gap-xl);
            position: relative;
            display: none;
        }

        @media (min-width: 768px) {
            .SearchBar {
                display: block;
            }
        }

        .SearchBar__input {
            width: 100%;
            padding: var(--gap-sm) var(--gap-lg);
            border: none;
            border-radius: var(--radius-full);
            font-size: 14px;
            outline: none;
            transition: box-shadow var(--transition-fast);
        }

        .SearchBar__input:focus {
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.2);
        }

        .SearchBar__icon {
            position: absolute;
            right: var(--gap-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        /* 导航操作区组件 */
        .Header__actions {
            display: flex;
            align-items: center;
            gap: var(--gap-md);
        }

        /* 导航链接组件 */
        .NavLink {
            color: white;
            text-decoration: none;
            padding: var(--gap-xs) var(--gap-sm);
            border-radius: var(--radius-md);
            transition: background-color var(--transition-fast);
            display: inline-flex;
            align-items: center;
            gap: var(--gap-xs);
        }

        .NavLink:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .NavLink.active {
            background-color: rgba(255, 255, 255, 0.2);
            font-weight: 500;
        }

        /* 按钮组件 */
        .Button {
            padding: var(--gap-xs) var(--gap-md);
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 14px;
            transition: all var(--transition-md);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--gap-xs);
            text-decoration: none;
            outline: none;
            font-weight: 500;
        }

        .Button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .Button--primary {
            background-color: var(--primary);
            color: white;
            border: 1px solid var(--primary);
        }

        .Button--primary:hover:not(:disabled) {
            background-color: var(--primary-hover);
            box-shadow: var(--shadow-md);
        }

        .Button--secondary {
            background-color: white;
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .Button--secondary:hover:not(:disabled) {
            background-color: var(--bg-secondary);
        }

        .Button--danger {
            background-color: var(--danger);
            color: white;
            border: 1px solid var(--danger);
        }

        .Button--danger:hover:not(:disabled) {
            background-color: #c0392b;
            box-shadow: var(--shadow-md);
        }

        .Button--small {
            padding: 2px var(--gap-sm);
            font-size: 12px;
        }

        /* 主内容区 */
        .MainContent {
            padding: var(--gap-lg) 0;
            flex: 1;
        }

        .MainContent__wrapper {
            display: grid;
            grid-template-columns: 1fr;
            gap: var(--gap-lg);
        }

        @media (min-width: 992px) {
            .MainContent__wrapper {
                grid-template-columns: 1fr 300px;
            }
        }

        /* 侧边栏 */
        .Sidebar {
            display: none;
        }

        @media (min-width: 992px) {
            .Sidebar {
                display: block;
            }
        }

        .Sidebar__module {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--gap-md);
            margin-bottom: var(--gap-lg);
        }

        .Sidebar__title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: var(--gap-md);
            color: var(--text-primary);
        }

        /* 帖子详情组件样式 */
        .PostDetail {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--gap-lg);
            margin-bottom: var(--gap-lg);
        }

        .PostDetail__header {
            margin-bottom: var(--gap-lg);
            padding-bottom: var(--gap-lg);
            border-bottom: 1px solid var(--border);
        }

        .PostDetail__title {
            font-size: 24px;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: var(--gap-md);
            line-height: 1.4;
        }

        .PostDetail__meta {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: var(--gap-md);
        }

        .PostDetail__author {
            display: flex;
            align-items: center;
            gap: var(--gap-sm);
        }

        .PostDetail__authorLink {
            display: flex;
            align-items: center;
            gap: var(--gap-sm);
            text-decoration: none;
            color: var(--text-primary);
        }

        .PostDetail__avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            overflow: hidden;
        }

        .PostDetail__avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .PostDetail__authorInfo {
            display: flex;
            flex-direction: column;
        }

        .PostDetail__authorName {
            font-weight: 600;
            color: var(--text-primary);
        }

        .PostDetail__postTime {
            font-size: 12px;
            color: var(--text-light);
        }

        .PostDetail__stats {
            display: flex;
            align-items: center;
            gap: var(--gap-md);
            font-size: 12px;
            color: var(--text-secondary);
        }

        .PostDetail__statItem {
            display: flex;
            align-items: center;
            gap: var(--gap-xs);
        }

        .PostDetail__actions {
            display: flex;
            align-items: center;
            gap: var(--gap-sm);
        }

        .PostDetail__content {
            font-size: 16px;
            line-height: 1.8;
            margin-bottom: var(--gap-lg);
            color: var(--text-primary);
        }

        .PostDetail__content p {
            margin-bottom: var(--gap-md);
        }

        .PostDetail__content img {
            max-width: 100%;
            height: auto;
            border-radius: var(--radius-md);
            margin: var(--gap-md) 0;
        }

        .PostDetail__footer {
            border-top: 1px solid var(--border);
            padding-top: var(--gap-md);
        }

        .PostDetail__tags {
            display: flex;
            flex-wrap: wrap;
            gap: var(--gap-xs);
            margin-bottom: var(--gap-md);
        }

        .PostDetail__tag {
            background-color: var(--bg-secondary);
            color: var(--text-secondary);
            padding: var(--gap-xs) var(--gap-sm);
            border-radius: 12px;
            font-size: 12px;
            text-decoration: none;
            transition: all var(--transition-fast);
        }

        .PostDetail__tag:hover {
            background-color: var(--primary);
            color: white;
        }

        .PostDetail__share {
            display: flex;
            align-items: center;
            gap: var(--gap-md);
        }

        .PostDetail__shareText {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .PostDetail__shareIcons {
            display: flex;
            gap: var(--gap-sm);
        }

        .PostDetail__shareIcon {
            color: var(--text-light);
            font-size: 16px;
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        .PostDetail__shareIcon:hover {
            color: var(--primary);
        }

        /* 评论组件样式 */
        .Comments {
            background-color: var(--bg-primary);
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--gap-lg);
        }

        .Comments__header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--gap-lg);
        }

        .Comments__title {
            font-size: 18px;
            font-weight: bold;
            color: var(--text-primary);
        }

        .Comments__count {
            color: var(--text-light);
            font-size: 14px;
            margin-left: var(--gap-sm);
        }

        .Comments__sort {
            display: flex;
            align-items: center;
            gap: var(--gap-sm);
        }

        .Comments__sortOption {
            color: var(--text-secondary);
            cursor: pointer;
            padding: var(--gap-xs) var(--gap-sm);
            border-radius: var(--radius-md);
            background: none;
            border: none;
            font-size: 14px;
            transition: all var(--transition-fast);
        }

        .Comments__sortOption:hover,
        .Comments__sortOption.active {
            color: var(--primary);
            background-color: var(--bg-secondary);
        }

        .Comments__form {
            background-color: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: var(--gap-md);
            margin-bottom: var(--gap-lg);
        }

        .Comments__formHeader {
            display: flex;
            align-items: flex-start;
            gap: var(--gap-sm);
            margin-bottom: var(--gap-sm);
        }

        .Comments__formAvatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            overflow: hidden;
            flex-shrink: 0;
        }

        .Comments__formAvatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .Comments__formInput {
            flex: 1;
        }

        .Comments__textarea {
            width: 100%;
            min-height: 80px;
            padding: var(--gap-sm);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            resize: vertical;
            font-family: inherit;
            font-size: 14px;
            outline: none;
            transition: border-color var(--transition-fast);
        }

        .Comments__textarea:focus {
            border-color: var(--primary);
        }

        .Comments__formActions {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: var(--gap-sm);
            margin-top: var(--gap-sm);
        }

        .Comments__attachments {
            display: flex;
            align-items: center;
            gap: var(--gap-sm);
            margin-right: auto;
        }

        .Comments__attachBtn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 16px;
            padding: var(--gap-xs);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }

        .Comments__attachBtn:hover {
            color: var(--primary);
            background-color: var(--bg-secondary);
        }

        .Comments__loginPrompt {
            text-align: center;
            padding: var(--gap-lg);
            color: var(--text-secondary);
        }

        .Comments__loginPrompt a {
            color: var(--primary);
            text-decoration: none;
        }

        .Comments__loginPrompt a:hover {
            text-decoration: underline;
        }

        .Comments__list {
            display: flex;
            flex-direction: column;
            gap: var(--gap-lg);
        }

        .Comments__item {
            display: flex;
            gap: var(--gap-sm);
        }

        .Comments__itemAvatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            overflow: hidden;
            flex-shrink: 0;
        }

        .Comments__itemAvatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .Comments__itemContent {
            flex: 1;
        }

        .Comments__itemHeader {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--gap-xs);
        }

        .Comments__itemAuthor {
            font-weight: 600;
            color: var(--text-primary);
        }

        .Comments__itemTime {
            color: var(--text-light);
            font-size: 12px;
        }

        .Comments__itemBody {
            background-color: var(--bg-tertiary);
            padding: var(--gap-sm);
            border-radius: var(--radius-md);
            margin-bottom: var(--gap-xs);
            line-height: 1.5;
        }

        .Comments__itemActions {
            display: flex;
            align-items: center;
            gap: var(--gap-md);
        }

        .Comments__itemAction {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 12px;
            cursor: pointer;
            padding: var(--gap-xs);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
            display: inline-flex;
            align-items: center;
            gap: var(--gap-xs);
        }

        .Comments__itemAction:hover {
            color: var(--primary);
            background-color: var(--bg-secondary);
        }

        .Comments__itemAction.active {
            color: var(--danger);
        }

        .Comments__replyForm {
            margin-top: var(--gap-sm);
            padding: var(--gap-sm);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            background-color: var(--bg-secondary);
            display: none;
        }

        .Comments__replyTextarea {
            width: 100%;
            min-height: 60px;
            padding: var(--gap-sm);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            resize: vertical;
            font-family: inherit;
            font-size: 12px;
            outline: none;
            margin-bottom: var(--gap-sm);
        }

        .Comments__replyActions {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: var(--gap-sm);
        }

        .Comments__replies {
            margin-top: var(--gap-md);
            margin-left: 24px;
            padding-left: var(--gap-md);
            border-left: 2px solid var(--border);
            display: flex;
            flex-direction: column;
            gap: var(--gap-md);
        }

        .Comments__replyItem {
            display: flex;
            gap: var(--gap-sm);
        }

        .Comments__replyAvatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 12px;
            overflow: hidden;
            flex-shrink: 0;
        }

        .Comments__replyAvatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .Comments__replyContent {
            flex: 1;
        }

        .Comments__replyHeader {
            display: flex;
            align-items: center;
            gap: var(--gap-xs);
            margin-bottom: var(--gap-xs);
            flex-wrap: wrap;
        }

        .Comments__replyAuthor {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 12px;
        }

        .Comments__replyTo {
            color: var(--text-light);
            font-size: 12px;
        }

        .Comments__replyTarget {
            color: var(--primary);
            font-size: 12px;
        }

        .Comments__replyTime {
            color: var(--text-light);
            font-size: 12px;
            margin-left: auto;
        }

        .Comments__replyBody {
            background-color: var(--bg-secondary);
            padding: var(--gap-xs) var(--gap-sm);
            border-radius: var(--radius-sm);
            font-size: 12px;
            line-height: 1.4;
            margin-bottom: var(--gap-xs);
        }

        .Comments__replyAction {
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 12px;
            cursor: pointer;
            padding: var(--gap-xs);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
            display: inline-flex;
            align-items: center;
            gap: var(--gap-xs);
        }

        .Comments__replyAction:hover {
            color: var(--primary);
            background-color: var(--bg-tertiary);
        }

        .Comments__empty {
            text-align: center;
            padding: var(--gap-xl);
            color: var(--text-secondary);
        }

        .Comments__pagination {
            margin-top: var(--gap-lg);
        }

        .Pagination {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--gap-xs);
        }

        .Pagination__link {
            padding: var(--gap-xs) var(--gap-sm);
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }

        .Pagination__link:hover {
            color: var(--primary);
            background-color: var(--bg-secondary);
        }

        .Pagination__link.active {
            color: white;
            background-color: var(--primary);
        }

        /* 贴吧信息侧边栏 */
        .Sidebar__forumInfo {
            text-align: center;
        }

        .Sidebar__forumCover {
            width: 100%;
            height: 100px;
            background-color: var(--bg-secondary);
            border-radius: var(--radius-md);
            overflow: hidden;
            margin-bottom: var(--gap-md);
        }

        .Sidebar__forumCover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .Sidebar__forumName {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: var(--gap-sm);
            color: var(--text-primary);
        }

        .Sidebar__forumDesc {
            color: var(--text-secondary);
            font-size: 12px;
            margin-bottom: var(--gap-md);
            line-height: 1.4;
        }

        .Sidebar__forumStats {
            display: flex;
            justify-content: space-around;
            margin-bottom: var(--gap-md);
            padding: var(--gap-sm) 0;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }

        .Sidebar__forumStats span {
            color: var(--text-secondary);
            font-size: 12px;
        }

        /* 热门帖子侧边栏 */
        .Sidebar__hotPosts {
            display: flex;
            flex-direction: column;
            gap: var(--gap-sm);
        }

        .Sidebar__hotPost {
            display: flex;
            gap: var(--gap-sm);
            align-items: center;
            padding: var(--gap-sm);
            border-radius: var(--radius-md);
            transition: background-color var(--transition-fast);
            text-decoration: none;
            color: var(--text-primary);
        }

        .Sidebar__hotPost:hover {
            background-color: var(--bg-secondary);
        }

        .Sidebar__hotPostRank {
            width: 20px;
            height: 20px;
            background-color: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .Sidebar__hotPostContent {
            flex: 1;
            min-width: 0;
        }

        .Sidebar__hotPostTitle {
            font-size: 12px;
            font-weight: 500;
            margin-bottom: var(--gap-xs);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: var(--text-primary);
        }

        .Sidebar__hotPostMeta {
            display: flex;
            gap: var(--gap-sm);
            font-size: 10px;
            color: var(--text-light);
        }

        /* 页脚 */
        .Footer {
            background-color: var(--bg-primary);
            border-top: 1px solid var(--border);
            padding: var(--gap-lg) 0;
            margin-top: auto;
        }

        .Footer__content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .Footer__logo {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: var(--gap-md);
        }

        .Footer__links {
            display: flex;
            flex-wrap: wrap;
            gap: var(--gap-md);
            margin-bottom: var(--gap-md);
            justify-content: center;
        }

        .Footer__link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 12px;
            transition: color var(--transition-fast);
        }

        .Footer__link:hover {
            color: var(--primary);
        }

        .Footer__copyright {
            color: var(--text-light);
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="Layout">
        <!-- 头部导航 -->
        <header class="Header">
            <div class="Container Header__container">
                <div class="Logo">
                    <a href="/">
                        <svg class="Logo__icon" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
                        </svg>
                        百度贴吧
                    </a>
                </div>
                
                <div class="SearchBar">
                    <form action="/search" method="get">
                        <input type="text" name="q" class="SearchBar__input" placeholder="搜索贴吧、帖子或用户" />
                        <button type="submit" class="SearchBar__icon">
                            <i class="fas fa-search"></i>
                        </button>
                    </form>
                </div>
                
                <div class="Header__actions">
                    {% if user.is_authenticated %}
                        <a href="/user/{{ user.id }}" class="NavLink">
                            <i class="fas fa-user"></i> {{ user.username }}
                        </a>
                        <a href="/create_post" class="Button Button--secondary">
                            <i class="fas fa-pen"></i> 发帖
                        </a>
                        <a href="/logout" class="NavLink">
                            <i class="fas fa-sign-out-alt"></i> 退出
                        </a>
                    {% else %}
                        <a href="/login" class="Button Button--secondary">登录</a>
                        <a href="/register" class="Button Button--primary">注册</a>
                    {% endif %}
                </div>
            </div>
        </header>

        <!-- 主内容区 -->
        <main class="MainContent">
            {% block content %}{% endblock %}
        </main>

        <!-- 页脚 -->
        <footer class="Footer">
            <div class="Container Footer__content">
                <div class="Footer__logo">百度贴吧</div>
                <div class="Footer__links">
                    <a href="#" class="Footer__link">关于我们</a>
                    <a href="#" class="Footer__link">使用帮助</a>
                    <a href="#" class="Footer__link">隐私政策</a>
                    <a href="#" class="Footer__link">联系我们</a>
                </div>
                <div class="Footer__copyright">© 2024 百度贴吧 版权所有</div>
            </div>
        </footer>
    </div>

    <!-- CSRF Token -->
    <script>
        // 全局CSRF Token
        const csrfToken = '{{ csrf_token }}';
    </script>
</body>
</html>